<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="https://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta https-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The Build script | How to use publican_creators | publican_creators 1.2.2</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 2.4.0 using SUSE XSL Stylesheets @@#version@@ (based on DocBook XSL Stylesheets 1.78.1) - chunked" /><meta name="product-name" content="publican_creators" /><meta name="product-number" content="1.2.2" /><meta name="book-title" content="How to use publican_creators" /><meta name="chapter-title" content="Chapter 6. The Build script" /><link rel="home" href="index.html" title="How to use publican_creators" /><link rel="up" href="index.html" title="How to use publican_creators" /><link rel="prev" href="sec.feedback.html" title="Chapter 5. Add a revision" /><link rel="next" href="appe-Documentation-hoe-reek-Revision_History.html" title="Appendix A. Revision History" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'httpss:') ? 'httpss' : 'https';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="https://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="How to use publican_creators"><span class="book-icon">How to use publican_creators</span></a><span> › </span><a class="crumb" href="sec.build.html">The Build script</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>How to use publican_creators</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="cha.about.html"><span class="number">1 </span><span class="name">Round about</span></a></li><li class="inactive"><a href="sec.introduction.html"><span class="number">2 </span><span class="name">Introduction</span></a></li><li class="inactive"><a href="sec.configuration.html"><span class="number">3 </span><span class="name">The Configuration file</span></a></li><li class="inactive"><a href="sec.using.html"><span class="number">4 </span><span class="name">Using publican_creators</span></a></li><li class="inactive"><a href="sec.feedback.html"><span class="number">5 </span><span class="name">Add a revision</span></a></li><li class="inactive"><a href="sec.build.html"><span class="number">6 </span><span class="name">The Build script</span></a></li><li class="inactive"><a href="appe-Documentation-hoe-reek-Revision_History.html"><span class="number">A </span><span class="name">Revision History</span></a></li><li class="inactive"><a href="sec.gfdl.html"><span class="number">B </span><span class="name">GNU Free Documentation License</span></a></li><li class="inactive"><a href="ix01.html"><span class="number"> </span><span class="name">Index</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 5. Add a revision" href="sec.feedback.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Appendix A. Revision History" href="appe-Documentation-hoe-reek-Revision_History.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="How to use publican_creators"><span class="book-icon">How to use publican_creators</span></a><span> › </span><a class="crumb" href="sec.build.html">The Build script</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 5. Add a revision" href="sec.feedback.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Appendix A. Revision History" href="appe-Documentation-hoe-reek-Revision_History.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class=""><div class="documentation"><div xml:lang="en-US" class="chapter " id="sec.build" lang="en-US"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">publican_creators</span> <span class="productnumber">1.2.2</span></div><div><h1 class="title"><span class="number">6 </span><span class="name">The Build script</span> </h1></div></div></div><div class="line"></div>
    


    <p>The small <code class="code">Rakefile</code> script will be placed in each new documentation project,
        directly under title/language/. The build script matches the most common documentation
        targets like docx, odt, rtf, wml, pdf, html, man, txt, epub and eclipse.</p>
    <div id="idm139645243566304" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.png" /><h6>Warning</h6>
        <p>The export to docx, odt, rtf and wml only working if the <a class="ulink" href="https://www.xmlmind.com/foconverter/" target="_blank">XMLMind Foconverter (XFC) <span class="ulink-url"> (https://www.xmlmind.com/foconverter/)</span></a>is
            installed and a brand (a own brand or the default brand) is installed. Also the “fo2*”
            scripts should be soft linked to /usr/bin or the path is placed in $PATH.</p>
    </div>
    <p>All other targets like pdf, html, man, txt, epub and eclipse are publican's own
        targets.</p>
    <p>The targets will be built into tmp/language/format (e.g. tmp/de-DE/docx). The placeholders
        (like language) will be solved by producing a new documentation.</p>
    <p>The <code class="code">Rakefile</code> looks
        like:</p><div class="verbatim-wrap"><pre class="programlisting"># -*- ruby -*-
# encoding: utf-8
require 'fileutils'

task :default do
puts 'usage: rake [export_docx] [export_odt] [export_rtf] [export_wml] [export_pdf] [export_html] [export_man]
[export_txt] [export_txt] [export_epub]'
puts
puts 'Options:'
puts 'export_docx : Export DocBook source to DOCX'
puts ' Example: rake export_docx'
puts 'export_odt : Export DocBook source to ODT'
puts ' Example: rake export_odt'
puts 'export_rtf : Export DocBook source to RTF'
puts ' Example: rake export_rtf'
puts 'export_wml: Export DocBook source to WML'
puts ' Example: rake export_wml'
puts 'export_pdf: Export Docbook source to PDF'
puts ' Example: rake export_pdf'
puts 'export_html: Export DocBook source to HTML'
puts ' Example: rake export_html'
puts 'export_man: Export DocBook source to MAN'
puts ' Example: rake export_man'
puts 'export_txt: Export DocBook source to TXT'
puts ' Example: rake export_txt'
puts 'export_epub: Export DocBook source to EPUB'
puts ' Example: rake export_epub'
puts 'export_eclipse: Export DocBook source to Eclipse Help'
puts ' Example: rake export_eclipse'
end

require 'dir'
require 'fileutils'
desc 'Checks if temp dir is available. Otherwise it creates it'
task :checker do
todos = "../tmp/#{language}/docx"
if Dir.exist?(todos)
puts 'Found directory. Im using it.'
else
puts 'No directory found. Im creating it.'
FileUtils.mkdir_p(todos)
end
todos = "../tmp/#{language}/odt"
if Dir.exist?(todos)
puts 'Found directory. Im using it.'
else
puts 'No directory found. Im creating it.'
FileUtils.mkdir_p(todos)
end
todos = "../tmp/#{language}/rtf"
if Dir.exist?(todos)
puts 'Found directory. Im using it.'
else
puts 'No directory found. Im creating it.'
FileUtils.mkdir_p(todos)
end
todos = "../tmp/#{language}/wml"
if Dir.exist?(todos)
puts 'Found directory. Im using it.'
else
puts 'No directory found. Im creating it.'
FileUtils.mkdir_p(todos)
end
end

end

desc 'Convert to DOCX'
task :export_docx =&gt; [:checker] do
puts 'Resolving all XML-Entities and XI-Includes'
system("xmllint --noent --dropdtd --xinclude #{title}.xml -o #{title}-resolved.xml")
puts 'Formatting XML to XSL-FO'
system("saxon-xslt -o #{title}.fo #{title}-resolved.xml #{xfc_brand_dir}")
puts 'Removing temporary resolved file'
FileUtils.rm('#{title}-resolved.xml')
puts 'Transforming to DOCX'
system("fo2docx #{title}.fo &gt; ../tmp/#{language}/docx/#{title}.docx")
puts 'Launching LibreOffice Writer for Preview'
system("lowriter ../tmp/#{language}/docx/#{title}.docx &amp;")
end

desc 'Convert to ODT'
task :export_odt =&gt; [:checker] do
puts 'Resolving all XML-Entities and XI-Includes'
system("xmllint --noent --dropdtd --xinclude #{title}.xml -o #{title}-resolved.xml")
puts 'Formatting XML to XSL-FO'
system("saxon-xslt -o #{title}.fo #{title}-resolved.xml #{xfc_brand_dir}")
puts 'Removing temporary resolved file'
FileUtils.rm('#{title}-resolved.xml')
puts 'Transforming to ODT'
system("fo2odt #{title}.fo &gt; ../tmp/#{language}/odt/#{title}.odt")
puts 'Launching LibreOffice Writer for Preview'
system("lowriter ../tmp/#{language}/odt/#{title}.odt &amp;")
end

desc 'Convert to RTF'
task :export_rtf =&gt; [:checker] do
puts 'Resolving all XML-Entities and XI-Includes'
system("xmllint --noent --dropdtd --xinclude #{title}.xml -o #{title}-resolved.xml")
puts 'Formatting XML to XSL-FO'
system("saxon-xslt -o #{title}.fo #{title}-resolved.xml #{xfc_brand_dir}")
puts 'Removing temporary resolved file'
FileUtils.rm('#{title}-resolved.xml')
puts 'Transforming to RTF'
system("fo2rtf #{title}.fo &gt; ../tmp/#{language}/rtf/#{title}.rtf")
puts 'Launching LibreOffice Writer for Preview'
system("lowriter ../tmp/#{language}/rtf/#{title}.rtf &amp;")
end

desc 'Convert to WML'
task :export_wml =&gt; [:checker] do
puts 'Resolving all XML-Entities and XI-Includes'
system("xmllint --noent --dropdtd --xinclude #{title}.xml -o #{title}-resolved.xml")
puts 'Formatting XML to XSL-FO'
system("saxon-xslt -o #{title}.fo #{title}-resolved.xml #{xfc_brand_dir}")
puts 'Removing temporary resolved file'
FileUtils.rm('#{title}-resolved.xml')
puts 'Transforming to WML'
system("fo2wml #{title}.fo &gt; ../tmp/#{language}/wml/#{title}.wml")
end

desc 'Convert to PDF'
task :export_pdf do
FileUtils.cd('..')
puts 'Cleaning up temp directory'
system('publican clean')
puts 'Formatting to PDF'
system('publican build --langs=#{language} --formats=pdf --allow_network')
puts 'Launching PDF-Viewer'
system('#{pdfview} tmp/#{language}/pdf/*.pdf &amp;')
end

desc 'Convert to HTML'
task :export_html do
FileUtils.cd('..')
puts 'Cleaning up temp directory'
system('publican clean')
puts 'Formatting to PDF'
system('publican build --langs=#{language} --formats=html --allow_network')
puts 'Launching Browser'
system('firefox tmp/#{language}/html/index.html &amp;')
end

desc 'Convert to MAN'
task :export_man do
FileUtils.cd('..')
puts 'Cleaning up temp directory'
system('publican clean')
puts 'Formatting to MAN'
system('publican build --langs=#{language} --formats=man --allow_network')
end

desc 'Convert to TXT'
task :export_txt do
FileUtils.cd('..')
puts 'Cleaning up temp directory'
system('publican clean')
puts 'Formatting to TXT'
system('publican build --langs=#{language} --formats=txt --allow_network')
puts 'Launching Texteditor'
system('gedit tmp/#{language}/txt/*.txt &amp;')
end

desc 'Convert to EPUB'
task :export_epub do
FileUtils.cd('..')
puts 'Cleaning up temp directory'
system('publican clean')
puts 'Formatting to EPUB'
system('publican build --langs=#{language} --formats=epub --allow_network')
if File.exist?('/usr/bin/ebook-viewer')
puts 'Launching EPUB-Viewer'
system('ebook-viewer /tmp/#{language}/*.epub &amp;')
else
puts 'You have to install calibre for using ebook-viewer for preview'
end
end

desc 'Convert to ECLIPSE'
task :export_eclipse do
FileUtils.cd('..')
puts 'Cleaning up temp directory'
system('publican clean')
puts 'Formatting to ECLIPSE'
system('publican build --langs=#{language} --formats=eclipse --allow_network')
end

desc 'Run convert to most used formats'
task :export_most =&gt; [:export_docx, :export_odt, :export_rtf, :export_html, :export_pdf] do
puts 'Successful exported to DOCX, ODT, RTF, HTML and PDF'
end

desc 'Run convert to all formats'
task :export_all =&gt; [:export_most, :export_wml, :export_man, :export_txt, :export_epub, :export_eclipse] do
puts 'Successfull exported to all formats'
end</pre></div>



</div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="appe-Documentation-hoe-reek-Revision_History.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Appendix A </span>Revision History</span></a><a class="nav-link" href="sec.feedback.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 5 </span>Add a revision</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        Sascha Manns</p><ul><li><a href="https://saigkill.tuxfamily.org" target="_top"></a></li><li><a href="httpss://saigkill.tuxfamily.org/dotclear/?contact" target="_top"></a></li></ul></div></div></body></html>
